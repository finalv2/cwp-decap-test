---
layout: layouts/default.njk
pageIndex: all
eleventyComputed:
  description: "{{ page.excerpt }}"
pagefind:
  type: Strategy
---
{%- from '_macros/page-banner.njk' import pageBanner with context -%}
{%- from '_macros/resource-card.njk' import resourceCard -%}
{%- from '_macros/topic-card.njk' import topicCard %}
{%- from '_macros/story-card.njk' import storyCard %}

{%- set resourceData -%}
  {%- for relatedResource in resources -%}
    {%- for item in collections.resources -%}
      {%- if item.data.title === relatedResource -%}
        {{ resourceCard({
          filetype: item.data.filetype,
          title: item.data.title,
          description: item.data.description,
          url: item.data.url,
          file: item.data.file
          })
        }}
      {%- endif -%}
    {%- endfor -%}
  {%- endfor -%}
{%- endset -%}

{%- set storyData -%}
  {%- for relatedStory in stories -%}
    {%- for item in collections.stories -%}
      {%- if item.data.title === relatedStory -%}
        {{ storyCard({
            image: story.data.image,
            type: story.data.type,
            title: story.data.title,
            description: story.data.description,
            author: story.data.author,
            date: story.date,
            featured: false,
            url: story.url
          })
        }}
      {%- endif -%}
    {%- endfor -%}
  {%- endfor -%}
{%- endset -%}

{{ pageBanner({
  type: type,
  badge: "Strategy",
  header: title,
  tags: tags,
  full: true,
  hideSubheader: "yes"
  })
}}

<div class="l-wrapper">

{%- set pagefindMetaTags -%}
  {%- for tag in tags -%}
    {{ topics[tag].title }}
    {%- if not loop.last -%}, {% endif -%}
  {%- endfor -%}
{%- endset -%}

<div class="l-section">
<div class="l-stack">
<div class="l-wrapper-text l-center">
  {{ content | md | safe }}

{%- if resourceData !== "" -%}
  <h2>Resources</h2>
  {{ resourceData | safe }}
{%- endif -%}

{%- if storyData !== "" -%}
  <h2>Stories</h2>
  {{ storyData | safe }}
{%- endif -%}
</div>
</div>
</div>
</div>


</div>